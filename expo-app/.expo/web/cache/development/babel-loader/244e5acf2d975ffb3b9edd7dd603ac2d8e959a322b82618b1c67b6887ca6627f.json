{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { BarChart } from 'react-native-chart-kit';\nimport { auth, db } from \"../firebase/initFirebase\";\nimport { collection, query, orderBy, onSnapshot } from 'firebase/firestore';\nimport StatsCard from \"../components/StatsCard\";\nimport MiniSpark from \"../components/MiniSpark\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction safeNum(v) {\n  return typeof v === 'number' ? v : parseFloat(v) || 0;\n}\nexport default function DashboardScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    items = _useState2[0],\n    setItems = _useState2[1];\n  var _useState3 = useState('overview'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    view = _useState4[0],\n    setView = _useState4[1];\n  var _useState5 = useState('30'),\n    _useState6 = _slicedToArray(_useState5, 2),\n    range = _useState6[0],\n    setRange = _useState6[1];\n  useEffect(function () {\n    var unsub = null;\n    var user = auth.currentUser;\n    if (!user) {\n      setItems([]);\n      return;\n    }\n    var q = query(collection(db, 'users', user.uid, 'history'), orderBy('createdAt', 'desc'));\n    unsub = onSnapshot(q, function (snap) {\n      var arr = snap.docs.map(function (d) {\n        return _objectSpread({\n          id: d.id\n        }, d.data());\n      });\n      setItems(arr);\n    }, function () {});\n    return function () {\n      return unsub && unsub();\n    };\n  }, []);\n  var total = items.length;\n  var avg = total === 0 ? 0 : (items.reduce(function (s, it) {\n    return s + safeNum(it.result);\n  }, 0) / total).toFixed(1);\n  var last = items[0] ? safeNum(items[0].result).toFixed(1) : '—';\n  var recent = items.slice(0, 12).map(function (i) {\n    return safeNum(i.result);\n  }).reverse();\n  var labels = items.slice(0, 12).map(function (_, idx) {\n    return \"\" + (idx + 1);\n  }).reverse();\n  var chartWidth = Math.max(Dimensions.get('window').width - 40, 220);\n  var patientsMap = items.reduce(function (acc, it) {\n    var name = it.patientName ? it.patientName : 'Без имени';\n    acc[name] = acc[name] || [];\n    acc[name].push(it);\n    return acc;\n  }, {});\n  var patientList = Object.keys(patientsMap).map(function (k) {\n    return {\n      name: k,\n      count: patientsMap[k].length,\n      last: patientsMap[k][0]\n    };\n  });\n  var rangeFilteredItems = function () {\n    if (range === 'all') return items;\n    var days = parseInt(range, 10);\n    var cutoff = Date.now() - days * 24 * 60 * 60 * 1000;\n    return items.filter(function (it) {\n      var t = it.createdAt && it.createdAt.toDate ? it.createdAt.toDate().getTime() : typeof it.createdAt === 'number' ? it.createdAt : Date.now();\n      return t >= cutoff;\n    });\n  }();\n  var exportCsv = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (!items || items.length === 0) {\n        Alert.alert('Нет данных', 'Нет записей для экспорта');\n        return;\n      }\n      var rows = [['patientName', 'age', 'weight', 'weightUnit', 'creatinine', 'creatinineUnit', 'female', 'result', 'createdAt']];\n      rangeFilteredItems.forEach(function (it) {\n        var _it$age, _ref2, _it$weightRaw, _ref3, _it$creatinineRaw, _it$result;\n        var date = it.createdAt && it.createdAt.toDate ? it.createdAt.toDate().toISOString() : typeof it.createdAt === 'number' ? new Date(it.createdAt).toISOString() : '';\n        rows.push([it.patientName || '', (_it$age = it.age) != null ? _it$age : '', (_ref2 = (_it$weightRaw = it.weightRaw) != null ? _it$weightRaw : it.weightKg) != null ? _ref2 : '', it.weightUnit || '', (_ref3 = (_it$creatinineRaw = it.creatinineRaw) != null ? _it$creatinineRaw : it.creatinineMgDl) != null ? _ref3 : '', it.creatinineUnit || '', it.female ? '1' : '0', (_it$result = it.result) != null ? _it$result : '', date]);\n      });\n      var csv = rows.map(function (r) {\n        return r.map(function (v) {\n          return \"\\\"\" + String(v).replace(/\"/g, '\"\"') + \"\\\"\";\n        }).join(',');\n      }).join('\\n');\n      try {\n        if (Platform.OS === 'web' && typeof navigator !== 'undefined' && navigator.clipboard && navigator.clipboard.writeText) {\n          yield navigator.clipboard.writeText(csv);\n          Alert.alert('Экспорт', 'CSV скопирован в буфер обмена (браузер)');\n          return;\n        }\n        Alert.alert('Экспорт недоступен на устройстве', \"\\u0427\\u0442\\u043E\\u0431\\u044B \\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C CSV \\u043D\\u0430 \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0435, \\u0443\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u0435 \\u043F\\u0430\\u043A\\u0435\\u0442 expo-clipboard:\\n\\n    npm install expo-clipboard\\n\\n    \\u0417\\u0430\\u0442\\u0435\\u043C \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u043F\\u0443\\u0441\\u0442\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435.\");\n      } catch (e) {\n        Alert.alert('Ошибка', e.message || String(e));\n      }\n    });\n    return function exportCsv() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsxs(ScrollView, {\n    style: styles.container,\n    contentContainerStyle: {\n      padding: 20\n    },\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"\\u0414\\u0430\\u0448\\u0431\\u043E\\u0440\\u0434\"\n    }), _jsx(View, {\n      style: styles.segmentRow,\n      children: ['overview', 'trends', 'patients'].map(function (v) {\n        return _jsx(Pressable, {\n          onPress: function onPress() {\n            return setView(v);\n          },\n          style: [styles.segment, view === v && styles.segmentActive],\n          children: _jsx(Text, {\n            style: [styles.segmentText, view === v && styles.segmentTextActive],\n            children: v === 'overview' ? 'Обзор' : v === 'trends' ? 'Тренды' : 'Пациенты'\n          })\n        }, v);\n      })\n    }), _jsxs(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: 12\n      },\n      children: [_jsxs(View, {\n        style: {\n          flexDirection: 'row',\n          gap: 8\n        },\n        children: [_jsx(Pressable, {\n          onPress: function onPress() {\n            return setRange('7');\n          },\n          style: [styles.rangeBtn, range === '7' && styles.rangeBtnActive],\n          children: _jsx(Text, {\n            style: range === '7' ? styles.rangeBtnTextActive : styles.rangeBtnText,\n            children: \"7d\"\n          })\n        }), _jsx(Pressable, {\n          onPress: function onPress() {\n            return setRange('30');\n          },\n          style: [styles.rangeBtn, range === '30' && styles.rangeBtnActive],\n          children: _jsx(Text, {\n            style: range === '30' ? styles.rangeBtnTextActive : styles.rangeBtnText,\n            children: \"30d\"\n          })\n        }), _jsx(Pressable, {\n          onPress: function onPress() {\n            return setRange('all');\n          },\n          style: [styles.rangeBtn, range === 'all' && styles.rangeBtnActive],\n          children: _jsx(Text, {\n            style: range === 'all' ? styles.rangeBtnTextActive : styles.rangeBtnText,\n            children: \"All\"\n          })\n        })]\n      }), _jsx(Pressable, {\n        onPress: exportCsv,\n        style: styles.exportBtn,\n        children: _jsx(Text, {\n          style: {\n            color: '#064e3b',\n            fontWeight: '700'\n          },\n          children: \"Export CSV\"\n        })\n      })]\n    }), view === 'overview' && _jsxs(View, {\n      children: [_jsxs(View, {\n        style: styles.row,\n        children: [_jsx(StatsCard, {\n          title: \"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u043E\\u0432\",\n          value: total,\n          sparkData: recent.slice().reverse().slice(-8)\n        }), _jsx(StatsCard, {\n          title: \"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0438\\u0439 GFR\",\n          value: avg + \" mL/min\",\n          subtitle: \"\\u043F\\u043E \\u0432\\u0441\\u0435\\u043C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044F\\u043C\",\n          sparkData: recent.slice().reverse().slice(-8)\n        })]\n      }), _jsx(StatsCard, {\n        title: \"\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0439 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\",\n        value: last === '—' ? last : last + \" mL/min\"\n      }), _jsx(View, {\n        style: {\n          height: 12\n        }\n      }), _jsx(Text, {\n        style: styles.section,\n        children: \"\\u041F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0435 \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u044B\"\n      }), items.slice(0, 6).map(function (it) {\n        var _it$age2;\n        return _jsxs(View, {\n          style: styles.listItem,\n          children: [_jsxs(View, {\n            children: [it.patientName ? _jsx(Text, {\n              style: styles.listPatient,\n              children: it.patientName\n            }) : null, _jsxs(Text, {\n              style: styles.listValue,\n              children: [it.result, \" mL/min\"]\n            }), _jsx(Text, {\n              style: styles.listMeta,\n              children: (it.weightKg ? it.weightKg.toFixed(1) : '') + \" kg \\xB7 \" + ((_it$age2 = it.age) != null ? _it$age2 : '') + \" y\"\n            })]\n          }), _jsx(MiniSpark, {\n            data: [it.result]\n          })]\n        }, it.id);\n      })]\n    }), view === 'trends' && _jsxs(View, {\n      children: [_jsx(Text, {\n        style: styles.section,\n        children: \"\\u0413\\u0440\\u0430\\u0444\\u0438\\u043A \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0445 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u043E\\u0432\"\n      }), recent.length === 0 ? _jsx(View, {\n        style: {\n          padding: 20\n        },\n        children: _jsx(Text, {\n          style: {\n            color: '#666'\n          },\n          children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0434\\u043B\\u044F \\u043F\\u043E\\u0441\\u0442\\u0440\\u043E\\u0435\\u043D\\u0438\\u044F \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\\u0430\"\n        })\n      }) : _jsx(BarChart, {\n        data: {\n          labels: labels,\n          datasets: [{\n            data: recent\n          }]\n        },\n        width: chartWidth,\n        height: 260,\n        fromZero: true,\n        showValuesOnTopOfBars: true,\n        chartConfig: {\n          backgroundColor: '#ffffff',\n          backgroundGradientFrom: '#ffffff',\n          backgroundGradientTo: '#f8fafc',\n          decimalPlaces: 0,\n          color: function color() {\n            var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n            return \"rgba(37,99,235, \" + opacity + \")\";\n          },\n          labelColor: function labelColor() {\n            var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n            return \"rgba(102,102,102, \" + opacity + \")\";\n          },\n          style: {\n            borderRadius: 12\n          }\n        },\n        style: {\n          borderRadius: 12\n        }\n      })]\n    }), view === 'patients' && _jsxs(View, {\n      children: [_jsx(Text, {\n        style: styles.section,\n        children: \"\\u041F\\u0430\\u0446\\u0438\\u0435\\u043D\\u0442\\u044B\"\n      }), patientList.length === 0 ? _jsx(View, {\n        style: {\n          padding: 20\n        },\n        children: _jsx(Text, {\n          style: {\n            color: '#666'\n          },\n          children: \"\\u041D\\u0435\\u0442 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439\"\n        })\n      }) : patientList.map(function (p) {\n        return _jsxs(View, {\n          style: styles.patientCard,\n          children: [_jsx(Text, {\n            style: styles.patientName,\n            children: p.name\n          }), _jsxs(Text, {\n            style: styles.patientMeta,\n            children: [p.count, \" \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442\\u043E\\u0432 \\xB7 \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0438\\u0439: \", p.last.result, \" mL/min\"]\n          })]\n        }, p.name);\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: '700',\n    marginBottom: 12\n  },\n  segmentRow: {\n    flexDirection: 'row',\n    marginBottom: 14,\n    backgroundColor: '#f3f4f6',\n    padding: 6,\n    borderRadius: 12\n  },\n  segment: {\n    paddingVertical: 8,\n    paddingHorizontal: 14,\n    borderRadius: 10\n  },\n  segmentActive: {\n    backgroundColor: '#fff'\n  },\n  segmentText: {\n    color: '#444'\n  },\n  segmentTextActive: {\n    color: '#1e40af',\n    fontWeight: '700'\n  },\n  row: {\n    flexDirection: 'row',\n    gap: 12,\n    marginBottom: 12\n  },\n  section: {\n    fontSize: 14,\n    color: '#444',\n    marginTop: 18,\n    marginBottom: 8\n  },\n  listItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: '#fff',\n    borderRadius: 10,\n    marginBottom: 8,\n    borderWidth: 1,\n    borderColor: '#f1f5f9'\n  },\n  listPatient: {\n    fontSize: 13,\n    fontWeight: '700',\n    color: '#0f172a'\n  },\n  listValue: {\n    fontSize: 16,\n    fontWeight: '700'\n  },\n  listMeta: {\n    color: '#666',\n    marginTop: 4\n  },\n  patientCard: {\n    padding: 12,\n    borderRadius: 10,\n    backgroundColor: '#f8fafc',\n    marginBottom: 10\n  },\n  patientName: {\n    fontWeight: '700'\n  },\n  patientMeta: {\n    color: '#666',\n    marginTop: 4\n  },\n  rangeBtn: {\n    paddingVertical: 6,\n    paddingHorizontal: 10,\n    borderRadius: 8,\n    backgroundColor: '#fff',\n    borderWidth: 1,\n    borderColor: '#eef2ff'\n  },\n  rangeBtnActive: {\n    backgroundColor: '#e0e7ff'\n  },\n  rangeBtnText: {\n    color: '#334155'\n  },\n  rangeBtnTextActive: {\n    color: '#1e3a8a',\n    fontWeight: '700'\n  },\n  exportBtn: {\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    borderRadius: 8,\n    backgroundColor: '#bbf7d0'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","ScrollView","StyleSheet","Dimensions","Pressable","Alert","Platform","BarChart","auth","db","collection","query","orderBy","onSnapshot","StatsCard","MiniSpark","jsx","_jsx","jsxs","_jsxs","safeNum","v","parseFloat","DashboardScreen","_useState","_useState2","_slicedToArray","items","setItems","_useState3","_useState4","view","setView","_useState5","_useState6","range","setRange","unsub","user","currentUser","q","uid","snap","arr","docs","map","d","_objectSpread","id","data","total","length","avg","reduce","s","it","result","toFixed","last","recent","slice","i","reverse","labels","_","idx","chartWidth","Math","max","get","width","patientsMap","acc","name","patientName","push","patientList","Object","keys","k","count","rangeFilteredItems","days","parseInt","cutoff","Date","now","filter","t","createdAt","toDate","getTime","exportCsv","_ref","_asyncToGenerator","alert","rows","forEach","_it$age","_ref2","_it$weightRaw","_ref3","_it$creatinineRaw","_it$result","date","toISOString","age","weightRaw","weightKg","weightUnit","creatinineRaw","creatinineMgDl","creatinineUnit","female","csv","r","String","replace","join","OS","navigator","clipboard","writeText","e","message","apply","arguments","style","styles","container","contentContainerStyle","padding","children","title","segmentRow","onPress","segment","segmentActive","segmentText","segmentTextActive","flexDirection","justifyContent","alignItems","marginBottom","gap","rangeBtn","rangeBtnActive","rangeBtnTextActive","rangeBtnText","exportBtn","color","fontWeight","row","value","sparkData","subtitle","height","section","_it$age2","listItem","listPatient","listValue","listMeta","datasets","fromZero","showValuesOnTopOfBars","chartConfig","backgroundColor","backgroundGradientFrom","backgroundGradientTo","decimalPlaces","opacity","undefined","labelColor","borderRadius","p","patientCard","patientMeta","create","flex","fontSize","paddingVertical","paddingHorizontal","marginTop","borderWidth","borderColor"],"sources":["C:/Study/MedicineCalc/MedicineCaclc/expo-app/screens/DashboardScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, ScrollView, StyleSheet, Dimensions, Pressable, Alert, Platform } from 'react-native';\r\nimport { BarChart } from 'react-native-chart-kit';\r\nimport { auth, db } from '../firebase/initFirebase';\r\nimport { collection, query, orderBy, onSnapshot } from 'firebase/firestore';\r\nimport StatsCard from '../components/StatsCard';\r\nimport MiniSpark from '../components/MiniSpark';\r\n\r\nfunction safeNum(v) { return typeof v === 'number' ? v : parseFloat(v) || 0 }\r\n\r\nexport default function DashboardScreen() {\r\n  const [items, setItems] = useState([]);\r\n  const [view, setView] = useState('overview'); // 'overview' | 'trends' | 'patients'\r\n  const [range, setRange] = useState('30'); // '7'|'30'|'all'\r\n\r\n  useEffect(() => {\r\n    let unsub = null;\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      setItems([]);\r\n      return;\r\n    }\r\n    const q = query(collection(db, 'users', user.uid, 'history'), orderBy('createdAt', 'desc'));\r\n    unsub = onSnapshot(q, snap => {\r\n      const arr = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n      setItems(arr);\r\n    }, () => {});\r\n\r\n    return () => unsub && unsub();\r\n  }, []);\r\n\r\n  const total = items.length;\r\n  const avg = total === 0 ? 0 : (items.reduce((s, it) => s + safeNum(it.result), 0) / total).toFixed(1);\r\n  const last = items[0] ? safeNum(items[0].result).toFixed(1) : '—';\r\n\r\n  const recent = items.slice(0, 12).map(i => safeNum(i.result)).reverse();\r\n  const labels = items.slice(0, 12).map((_, idx) => `${idx+1}`).reverse();\r\n\r\n  const chartWidth = Math.max(Dimensions.get('window').width - 40, 220);\r\n\r\n  const patientsMap = items.reduce((acc, it) => {\r\n    const name = it.patientName ? it.patientName : 'Без имени';\r\n    acc[name] = acc[name] || [];\r\n    acc[name].push(it);\r\n    return acc;\r\n  }, {});\r\n\r\n  const patientList = Object.keys(patientsMap).map(k => ({ name: k, count: patientsMap[k].length, last: patientsMap[k][0] }));\r\n\r\n  const rangeFilteredItems = (() => {\r\n    if (range === 'all') return items;\r\n    const days = parseInt(range, 10);\r\n    const cutoff = Date.now() - days * 24 * 60 * 60 * 1000;\r\n    return items.filter(it => {\r\n      const t = it.createdAt && it.createdAt.toDate ? it.createdAt.toDate().getTime() : (typeof it.createdAt === 'number' ? it.createdAt : Date.now());\r\n      return t >= cutoff;\r\n    });\r\n  })();\r\n\r\n  const exportCsv = async () => {\r\n    if (!items || items.length === 0) {\r\n      Alert.alert('Нет данных', 'Нет записей для экспорта');\r\n      return;\r\n    }\r\n    const rows = [['patientName','age','weight','weightUnit','creatinine','creatinineUnit','female','result','createdAt']];\r\n    rangeFilteredItems.forEach(it => {\r\n      const date = it.createdAt && it.createdAt.toDate ? it.createdAt.toDate().toISOString() : (typeof it.createdAt === 'number' ? new Date(it.createdAt).toISOString() : '');\r\n      rows.push([it.patientName || '', it.age ?? '', it.weightRaw ?? it.weightKg ?? '', it.weightUnit || '', it.creatinineRaw ?? it.creatinineMgDl ?? '', it.creatinineUnit || '', it.female ? '1' : '0', it.result ?? '', date]);\r\n    });\r\n    const csv = rows.map(r => r.map(v => `\"${String(v).replace(/\"/g,'\"\"')}\"`).join(',')).join('\\n');\r\n    try {\r\n      if (Platform.OS === 'web' && typeof navigator !== 'undefined' && navigator.clipboard && navigator.clipboard.writeText) {\r\n        await navigator.clipboard.writeText(csv);\r\n        Alert.alert('Экспорт', 'CSV скопирован в буфер обмена (браузер)');\r\n        return;\r\n      }\r\n      // On native, clipboard requires the optional package 'expo-clipboard'.\r\n      Alert.alert('Экспорт недоступен на устройстве', `Чтобы копировать CSV на устройстве, установите пакет expo-clipboard:\r\n\r\n    npm install expo-clipboard\r\n\r\n    Затем перезапустите приложение.`);\r\n    } catch (e) {\r\n      Alert.alert('Ошибка', e.message || String(e));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ScrollView style={styles.container} contentContainerStyle={{ padding: 20 }}>\r\n      <Text style={styles.title}>Дашборд</Text>\r\n\r\n      <View style={styles.segmentRow}>\r\n        {['overview','trends','patients'].map(v => (\r\n          <Pressable key={v} onPress={() => setView(v)} style={[styles.segment, view===v && styles.segmentActive]}>\r\n            <Text style={[styles.segmentText, view===v && styles.segmentTextActive]}>{v === 'overview' ? 'Обзор' : v === 'trends' ? 'Тренды' : 'Пациенты'}</Text>\r\n          </Pressable>\r\n        ))}\r\n      </View>\r\n\r\n      <View style={{flexDirection:'row', justifyContent:'space-between', alignItems:'center', marginBottom:12}}>\r\n        <View style={{flexDirection:'row', gap:8}}>\r\n          <Pressable onPress={() => setRange('7')} style={[styles.rangeBtn, range==='7' && styles.rangeBtnActive]}><Text style={range==='7' ? styles.rangeBtnTextActive : styles.rangeBtnText}>7d</Text></Pressable>\r\n          <Pressable onPress={() => setRange('30')} style={[styles.rangeBtn, range==='30' && styles.rangeBtnActive]}><Text style={range==='30' ? styles.rangeBtnTextActive : styles.rangeBtnText}>30d</Text></Pressable>\r\n          <Pressable onPress={() => setRange('all')} style={[styles.rangeBtn, range==='all' && styles.rangeBtnActive]}><Text style={range==='all' ? styles.rangeBtnTextActive : styles.rangeBtnText}>All</Text></Pressable>\r\n        </View>\r\n        <Pressable onPress={exportCsv} style={styles.exportBtn}><Text style={{color:'#064e3b', fontWeight:'700'}}>Export CSV</Text></Pressable>\r\n      </View>\r\n\r\n      {view === 'overview' && (\r\n        <View>\r\n          <View style={styles.row}>\r\n            <StatsCard title=\"Всего расчётов\" value={total} sparkData={recent.slice().reverse().slice(-8)} />\r\n            <StatsCard title=\"Средний GFR\" value={`${avg} mL/min`} subtitle=\"по всем записям\" sparkData={recent.slice().reverse().slice(-8)} />\r\n          </View>\r\n          <StatsCard title=\"Последний результат\" value={last === '—' ? last : `${last} mL/min`} />\r\n          <View style={{height:12}} />\r\n          <Text style={styles.section}>Последние расчёты</Text>\r\n          {items.slice(0,6).map(it => (\r\n            <View key={it.id} style={styles.listItem}>\r\n              <View>\r\n                {it.patientName ? <Text style={styles.listPatient}>{it.patientName}</Text> : null}\r\n                <Text style={styles.listValue}>{it.result} mL/min</Text>\r\n                <Text style={styles.listMeta}>{`${it.weightKg ? it.weightKg.toFixed(1) : ''} kg · ${it.age ?? ''} y`}</Text>\r\n              </View>\r\n              <MiniSpark data={[it.result]} />\r\n            </View>\r\n          ))}\r\n        </View>\r\n      )}\r\n\r\n      {view === 'trends' && (\r\n        <View>\r\n          <Text style={styles.section}>График последних результатов</Text>\r\n          {recent.length === 0 ? (\r\n            <View style={{padding:20}}><Text style={{color:'#666'}}>Нет данных для построения графика</Text></View>\r\n          ) : (\r\n            <BarChart\r\n              data={{ labels: labels, datasets: [{ data: recent }] }}\r\n              width={chartWidth}\r\n              height={260}\r\n              fromZero={true}\r\n              showValuesOnTopOfBars={true}\r\n              chartConfig={{\r\n                backgroundColor: '#ffffff',\r\n                backgroundGradientFrom: '#ffffff',\r\n                backgroundGradientTo: '#f8fafc',\r\n                decimalPlaces: 0,\r\n                color: (opacity = 1) => `rgba(37,99,235, ${opacity})`,\r\n                labelColor: (opacity = 1) => `rgba(102,102,102, ${opacity})`,\r\n                style: { borderRadius: 12 }\r\n              }}\r\n              style={{ borderRadius: 12 }}\r\n            />\r\n          )}\r\n        </View>\r\n      )}\r\n\r\n      {view === 'patients' && (\r\n        <View>\r\n          <Text style={styles.section}>Пациенты</Text>\r\n          {patientList.length === 0 ? (\r\n            <View style={{padding:20}}><Text style={{color:'#666'}}>Нет записей</Text></View>\r\n          ) : (\r\n            patientList.map(p => (\r\n              <View key={p.name} style={styles.patientCard}>\r\n                <Text style={styles.patientName}>{p.name}</Text>\r\n                <Text style={styles.patientMeta}>{p.count} расчётов · последний: {p.last.result} mL/min</Text>\r\n              </View>\r\n            ))\r\n          )}\r\n        </View>\r\n      )}\r\n\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, backgroundColor: '#fff' },\r\n  title: { fontSize: 20, fontWeight: '700', marginBottom: 12 },\r\n  segmentRow: { flexDirection: 'row', marginBottom: 14, backgroundColor: '#f3f4f6', padding: 6, borderRadius: 12 },\r\n  segment: { paddingVertical: 8, paddingHorizontal: 14, borderRadius: 10 },\r\n  segmentActive: { backgroundColor: '#fff' },\r\n  segmentText: { color: '#444' },\r\n  segmentTextActive: { color: '#1e40af', fontWeight: '700' },\r\n  row: { flexDirection: 'row', gap: 12, marginBottom: 12 },\r\n  section: { fontSize: 14, color: '#444', marginTop: 18, marginBottom: 8 },\r\n  listItem: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', padding: 12, backgroundColor: '#fff', borderRadius: 10, marginBottom: 8, borderWidth: 1, borderColor: '#f1f5f9' },\r\n  listPatient: { fontSize: 13, fontWeight: '700', color: '#0f172a' },\r\n  listValue: { fontSize: 16, fontWeight: '700' },\r\n  listMeta: { color: '#666', marginTop: 4 },\r\n  patientCard: { padding: 12, borderRadius: 10, backgroundColor: '#f8fafc', marginBottom: 10 },\r\n  patientName: { fontWeight: '700' },\r\n  patientMeta: { color: '#666', marginTop: 4 }\r\n  ,rangeBtn: { paddingVertical:6, paddingHorizontal:10, borderRadius:8, backgroundColor:'#fff', borderWidth:1, borderColor:'#eef2ff' },\r\n  rangeBtnActive: { backgroundColor:'#e0e7ff' },\r\n  rangeBtnText: { color:'#334155' },\r\n  rangeBtnTextActive: { color:'#1e3a8a', fontWeight:'700' },\r\n  exportBtn: { paddingVertical:6, paddingHorizontal:12, borderRadius:8, backgroundColor:'#bbf7d0' }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}